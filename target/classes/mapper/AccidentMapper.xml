<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sm.graduation.accident.dao.AccidentMapper">



    <select id="selectByAll" resultType="com.sm.graduation.accident.pojo.AccidentPojo">
        SELECT id,accident,detail,acc_time,loss FROM accident_record
        <where>
            <if test="accTime != null">
                acc_time = #{accTime}
            </if>
        </where>
        ORDER BY id DESC
    </select>

    <select id="listById" resultType="com.sm.graduation.accident.pojo.AccidentPojo">
        SELECT id,accident,detail,acc_time,loss FROM accident_record where id = #{id}
    </select>


    <insert id="insertByAll">
        INSERT INTO accident_record
            <trim prefix="(" suffix=")" suffixOverrides=",">
                <if test="accident != null">
                    accident,
                </if>
                <if test="detail != null">
                    detail,
                </if>
                <if test="accTime != null">
                    acc_time,
                </if>
                <if test="loss != null">
                    loss
                </if>
            </trim>
            <trim prefix="VALUES (" suffix=")" suffixOverrides=",">
                <if test="accident != null">
                    #{accident},
                </if>
                <if test="detail != null">
                    #{detail},
                </if>
                <if test="accTime != null">
                    #{accTime},
                </if>
                <if test="loss != null">
                    #{loss}
                </if>
            </trim>
    </insert>


    <update id="updateById">
        UPDATE accident_record
        <trim prefix="SET"  suffixOverrides=",">
            <if test="accident != null">
                accident = #{accident},
            </if>
            <if test="detail != null">
                detail = #{detail},
            </if>
            <if test="accTime != null">
                acc_time = #{accTime},
            </if>
            <if test="loss != null">
                loss = #{loss}
            </if>
        </trim>
        where id = #{id}
    </update>


    <delete id="deleteById">
        DELETE FROM accident_record WHERE id = #{id}
    </delete>


</mapper>